<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Jekyll - Donal Mee</title> <link rel="shortcut icon" href="https://www.donal.mee.com/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="https://www.donal.mee.com/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135505936-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-135505936-1', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="https://www.donal.mee.com/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="https://www.donal.mee.com/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Jekyll | Donal Mee</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="Jekyll" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Notes on software and other things." /> <meta property="og:description" content="Notes on software and other things." /> <link rel="canonical" href="https://www.donal.mee.com/jekyll/" /> <meta property="og:url" content="https://www.donal.mee.com/jekyll/" /> <meta property="og:site_name" content="Donal Mee" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-08-19T20:56:00+01:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","url":"https://www.donal.mee.com/jekyll/","dateModified":"2020-08-19T20:56:00+01:00","datePublished":"2020-08-19T20:56:00+01:00","headline":"Jekyll","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.donal.mee.com/jekyll/"},"description":"Notes on software and other things.","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://www.donal.mee.com/" class="site-title lh-tight"> Donal Mee </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"> <li class="nav-list-item"> <a href="https://www.donal.mee.com/" class="nav-list-link">Posts</a> </li><li class="nav-list-item"><a href="https://www.donal.mee.com/about/" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="https://www.donal.mee.com/chef/" class="nav-list-link">Chef</a></li><li class="nav-list-item"><a href="https://www.donal.mee.com/fastai/" class="nav-list-link">Fast AI</a></li><li class="nav-list-item"><a href="https://www.donal.mee.com/groovy/" class="nav-list-link">Groovy</a></li><li class="nav-list-item active"><a href="https://www.donal.mee.com/jekyll/" class="nav-list-link active">Jekyll</a></li><li class="nav-list-item"><a href="https://www.donal.mee.com/jenkins-and-groovy/" class="nav-list-link">Jenkins and Groovy</a></li><li class="nav-list-item"><a href="https://www.donal.mee.com/powershell/" class="nav-list-link">Powershell</a></li></ul> </nav> <footer class="site-footer"> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Donal Mee" aria-label="Search Donal Mee" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <button class="btn js-toggle-dark-mode float-right">Dark mode</button> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="jekyll"> <a href="#jekyll" aria-labelledby="jekyll" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Jekyll </h1> <ul id="markdown-toc"> <li><a href="#basics" id="markdown-toc-basics">Basics</a></li> <li><a href="#themes" id="markdown-toc-themes">Themes</a></li> <li><a href="#table-of-contents" id="markdown-toc-table-of-contents">Table of contents</a></li> <li><a href="#plugins" id="markdown-toc-plugins">Plugins</a></li> <li><a href="#running-jekyll-on-windows" id="markdown-toc-running-jekyll-on-windows">Running Jekyll on Windows</a></li> <li><a href="#use-rake" id="markdown-toc-use-rake">Use Rake</a></li> <li><a href="#references" id="markdown-toc-references">References</a></li> </ul> <p>I’ve been looking for a static site generator for a while. And at some point even wrote my own. However, because I don’t want to maintain my own, I want to use someone elses. I am looking for a few things:</p> <ul> <li>static site generation so the site can be hosted on github pages</li> <li>generated from source so changes to the site can be stored in git</li> <li>quicky and easy</li> <li>looks decent</li> <li>site generated from markdown</li> </ul> <p>HTML is a hateful markup language for humans to write. You need something on top of it to achieve some level of sanity. Markdown is a nice simple markup language. And I am pretty happy writing text files and then using markdown. Thus, I want a site-generator that converts markdown to fairly decent, lightweight HTML. Without any crazy backends like PHP dynamically generating the site from a database. That sounds so awful.</p> <h2 id="basics"> <a href="#basics" aria-labelledby="basics" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basics </h2> <p>Jekyll is written in ruby. Visit <a href="jekyll-home">https://jekyllrb.com/</a>.</p> <p>Jekyll documentation pretty clearly warns you against using it on Windows. That’s probably because Ruby is really a linux community and so they only think about Windows after-the-fact.</p> <p>Thus, if your on Windows, use Windows linux subsystem, and install ruby there. How to <a href="how-to-install-jekyll">install jekyll</a>.</p> <p>Please know a fair amount of what follows if just copy-pasted from other sites so I don’t have to go fishing for those places. Credits are in the Reference section.</p> <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt-get <span class="nb">install </span>ruby-full build-essential zlib1g-dev
<span class="c"># Avoid installing gems in system ruby
</span>
<span class="nb">echo</span> <span class="s1">'# Install Ruby Gems to ~/gems'</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">echo</span> <span class="s1">'export GEM_HOME="$HOME/gems"'</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">echo</span> <span class="s1">'export PATH="$HOME/gems/bin:$PATH"'</span> <span class="o">&gt;&gt;</span> ~/.bashrc
<span class="nb">source</span> ~/.bashrc
<span class="c"># Install jekyll
</span>
gem <span class="nb">install </span>jekyll bundler
<span class="c"># Create a new site at /blog dir
</span>
jekyll new myblog
<span class="nb">cd </span>myblog
<span class="c"># Server the site. The site auto-refreshes.
</span>
bundle <span class="nb">exec </span>jekyll serve</code></pre></figure> <p>I think the rest is fantastically straight-forward to be honest. Once you have tried it a little bit at first.</p> <h2 id="themes"> <a href="#themes" aria-labelledby="themes" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Themes </h2> <p>You’ll see a remarkedly small amount of ‘source’ files in your site folder. This is because the default shipped theme ‘minima’ is actually installed as a ruby gem. The <code class="language-plaintext highlighter-rouge">_posts</code> directory is were your blog posts appear. Then there is a <code class="language-plaintext highlighter-rouge">_config.yml</code> that does some site-wide configuration, including selecting the theme. And there is an index/about page in markdown. This is super small.</p> <p>Then, when you invoke <code class="language-plaintext highlighter-rouge">bundle exec jekyll serve</code> it a <code class="language-plaintext highlighter-rouge">_site</code> directory that has all this HTML and stuff. Where does this come from? Well it comes from the ruby gems you installed, jekyll and the default theme. Pretty neat.</p> <p>How then do you change the theme or view where the files for the minima theme are? The minima theme is a gem, so actually you can see where on the file system it’s installed with ` bundle info –path minima`. But, obviously editing the package directly isn’t the supported way to alter or customise the theme. However, I don’t particularly want to use the minima theme.</p> <p>I decided to use another one that was good for documentation. In particular, I went for a theme called <a href="just-the-docs">Just the Docs</a>.</p> <p>Install it with <code class="language-plaintext highlighter-rouge">gem install just-the-docs</code> then set the <code class="language-plaintext highlighter-rouge">_config.yml</code> theme to <code class="language-plaintext highlighter-rouge">theme: "just-the-docs"</code>. And bingo.</p> <h2 id="table-of-contents"> <a href="#table-of-contents" aria-labelledby="table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <p>The ‘just-the-docs’ theme looks like it has a lot of the basic functionality I would like. But I would also really quite like a Table of Content that is present in a manner like the theme <a href="mkdocs-jekyll">Mkdocs-Jekyll</a>. It is based on Google’s material theme. But it has a nice table of contents that sits on right hand side of the page.</p> <p>But before worrying about placing it on the right-side, how do I get a table of contents at all? I want an auto-generated table of contents.</p> <p>This seems kind of crazy but <em>literally</em> insert the following into the page where you want to TOC to appear</p> <figure class="highlight"><pre><code class="language-markdown" data-lang="markdown"><span class="p">*</span> TOC
{:toc}</code></pre></figure> <p>It seems important to have the <code class="language-plaintext highlighter-rouge">* ...</code> line present before the toc command. I have no idea why. I really have no idea.</p> <p><a href="blog-jekyll-toc">This blog post</a> seems to describe it in more detail. As does <a href="[ouyi-jekyll-toc]">this other page</a>.</p> <p>And perhaps once you finally get a TOC inserted, you can look at <a href="[kramdown-toc]">kramdowns page</a> on what you can do with toc.</p> <h2 id="plugins"> <a href="#plugins" aria-labelledby="plugins" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Plugins </h2> <p>One of the lovely things about Jekyll is that there seems to be a plugin to do almost anything you’d want on your website.</p> <p>For example, perhaps you’d like to add a site-map to your websites so search-engines or other tools can find the content of your site more easily. Just google for an appropriate plugin.</p> <p>I use <a href="github-sitemap-plugin">jekyll-sitemap</a>. The instructions on how to install that plugin are on the readme. But, just for illustration, I’ll repeat them here:</p> <blockquote> <p>Add <code class="language-plaintext highlighter-rouge">gem 'jekyll-sitemap'</code> to your site’s Gemfile and run bundle.</p> </blockquote> <p>The Gemfile should be a file in the top-level directory for your site. Just adding the library reference isn’t enough. You also need to install the gem into your ruby environment. Do that with bundle by running <code class="language-plaintext highlighter-rouge">bundle install</code> from the top-level directory of your site.</p> <p>It should spit out something like</p> <figure class="highlight"><pre><code class="language-text" data-lang="text">Fetching gem metadata from https://rubygems.org/..........
Fetching gem metadata from https://rubygems.org/.
Resolving dependencies...
Using rake 12.3.1
Using public_suffix 4.0.5
Using addressable 2.7.0
Using bundler 2.1.4
Using colorator 1.1.0
Using concurrent-ruby 1.1.7
Using eventmachine 1.2.7
Using http_parser.rb 0.6.0
Using em-websocket 0.5.1
Using ffi 1.13.1
Using forwardable-extended 2.6.0
Using i18n 1.8.5
Using sassc 2.4.0
Using jekyll-sass-converter 2.1.0
Using rb-fsevent 0.10.4
Using rb-inotify 0.10.1
Using listen 3.2.1
Using jekyll-watch 2.2.1
Using rexml 3.2.4
Using kramdown 2.3.0
Using kramdown-parser-gfm 1.1.0
Using liquid 4.0.3
Using mercenary 0.4.0
Using pathutil 0.16.2
Using rouge 3.22.0
Using safe_yaml 1.0.5
Using unicode-display_width 1.7.0
Using terminal-table 1.8.0
Using jekyll 4.1.1
Using jekyll-feed 0.15.0
Using jekyll-seo-tag 2.6.1
Fetching jekyll-sitemap 1.4.0
Installing jekyll-sitemap 1.4.0
Using just-the-docs 0.3.1
Using minima 2.5.1
Bundle complete! 8 Gemfile dependencies, 34 gems now installed.
Use `bundle info [gemname]` to see where a bundled gem is installed.</code></pre></figure> <blockquote> <p>Add the following to your site’s <code class="language-plaintext highlighter-rouge">_config.yml</code></p> </blockquote> <figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://example.com"</span> <span class="c1"># the base hostname &amp; protocol for your site
</span>
<span class="na">plugins</span><span class="pi">:</span><span class="err">
</span>
  <span class="pi">-</span> <span class="s">jekyll-sitemap</span></code></pre></figure> <p>Now you should be ready to use the new plugin and get it to build your site-map. Run your rake build target. Then you should get a <code class="language-plaintext highlighter-rouge">sitemap.xml</code> produced in the build directory. This sites sitemap <a href="donalmee-sitemap">is output to here</a>. And it also produces a robots.txt.</p> <p>The power of plugins!</p> <h2 id="running-jekyll-on-windows"> <a href="#running-jekyll-on-windows" aria-labelledby="running-jekyll-on-windows" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running Jekyll on Windows </h2> <p>In my experience the Ruby community shines on Linux. That’s it’s home. On Windows, you’re likely to run into more issues as the community tends to develop primarily on linux. If your using Jekyll, while there are instructions on how to get it to work on Windows, I wouldn’t bother. Because, instead, with Windows Subsystem for Linux (thank you Microsoft!), it’s easy to get a linux environment on your Windows box. Personally, that’s how I develop this site. I tend to work on a Windows box but I use WSL.</p> <h2 id="use-rake"> <a href="#use-rake" aria-labelledby="use-rake" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use Rake </h2> <p>Rake, I think, is Ruby’s take on Make. I’m not that experienced with it. But I know the value of automation. So I recommend you setup Rake to create short-cuts for the things you typically do to develop your site. My basic <a href="donalmee-rake-file">Rake file</a> (again, in the top-level of the website), looks like this:</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">task</span> <span class="ss">default: </span><span class="p">[</span><span class="ss">:build</span><span class="p">]</span>

<span class="n">task</span> <span class="ss">:build</span> <span class="k">do</span>
    <span class="nb">puts</span> <span class="s2">"Building site, including search"</span>
    <span class="n">sh</span><span class="p">(</span><span class="s2">"bundle exec jekyll build -d docs"</span><span class="p">)</span>
    <span class="n">sh</span><span class="p">(</span><span class="s2">"cd docs &amp;&amp; bundle exec just-the-docs rake search:init"</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">task</span> <span class="ss">:serve</span> <span class="k">do</span>
    <span class="nb">puts</span> <span class="s2">"Serving site"</span>
    <span class="n">sh</span><span class="p">(</span><span class="s2">"bundle exec jekyll serve"</span><span class="p">)</span>
<span class="k">end</span></code></pre></figure> <p>I imagine developers with even a passing understanding of Rake could point out how stupid my use/abuse of <code class="language-plaintext highlighter-rouge">sh</code> is. I’ve literally looked at how to use Rake for about 30 minutes, and I just found it was quickest to get my head around how I can use it to get targets that do the shell invocations I do in WSL.</p> <h2 id="references"> <a href="#references" aria-labelledby="references" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> References </h2> <ul> <li><a href="https://jekyllrb.com/">jekyll-home</a></li> <li><a href="https://jekyllrb.com/docs/installation/ubuntu/">how-to-install-jekyll</a></li> <li><a href="https://pmarsceill.github.io/just-the-docs/">just-the-docs</a></li> <li><a href="https://vsoch.github.io/mkdocs-jekyll/">mkdocs-jekyll</a></li> <li><a href="https://kramdown.gettalong.org/converter/html.html">kramdown-toc</a></li> <li><a href="https://blog.webjeda.com/jekyll-toc/">blog-jekyll-toc</a></li> <li><a href="https://ouyi.github.io/post/2017/12/31/jekyll-table-of-contents.html">ouyi-jekyll-toc</a></li> <li><a href="https://github.com/jekyll/jekyll-sitemap">github-sitemap-plugin</a></li> <li><a href="https://github.com/ddmee/donalmeecom/blob/master/Rakefile">donalmee-rake-file</a></li> </ul> </div> </div> <div class="search-overlay"></div> </div> <script> const toggleDarkMode = document.querySelector('.js-toggle-dark-mode'); jtd.addEvent(toggleDarkMode, 'click', function(){ if (jtd.getTheme() === 'dark') { jtd.setTheme('light'); toggleDarkMode.textContent = 'Dark mode'; } else { jtd.setTheme('dark'); toggleDarkMode.textContent = 'Light mode'; } }); </script> </body> </html>
